---
:backends:
  - eyaml

:eyaml:
  :datadir: "/etc/puppetlabs/code/environments/%{::environment}/hieradata"
  :extension: 'yaml'
  :pkcs7_private_key: '/etc/puppetlabs/puppet/ssl/ca/ca_key.pem'
  :pkcs7_public_key: '/etc/puppetlabs/puppet/ssl/certs/ca.pem'

:hierarchy:
  - "nodes/%{::trusted.certname}"
  - "roles/%{::role}"
  - "platforms/%{::platform}"
  - "architectures/%{::architecture}/profiles/%{::nest.profile}"  # XXX Remove
  - "architectures/%{::architecture}"
  - "oses/%{::facts.osfamily}"                                    # XXX Remove
  - "common"
