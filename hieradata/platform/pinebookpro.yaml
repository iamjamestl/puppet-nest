---
nest::bootloader: systemd
nest::cflags: '-mcpu=cortex-a72.cortex-a53+crypto -O2 -pipe -ggdb'
nest::kernel_cmdline: ['console=ttyS2,1500000n8', 'console=tty0']
nest::text_scaling_factor: 1.1

# Sustained load drains the battery.  Reduce load from compilation by limiting
# build jobs to the number of big cores and leaving the LITTLE cores free for
# better interactivity.
nest::processorcount: 2

nest::heavy_packages:
  - 'dev-lang/rust'   # doesn't use distcc or honor load limits
  - 'x11-misc/taffybar'
  - 'x11-wm/xmonad'
  - 'x11-wm/xmonad-contrib'

nest::package_keywords:
  sys-kernel/gentoo-sources:
    version: '=5.7.0'

  # For now, I want the latest improvements to panfrost in mesa
  media-libs/mesa: {}

nest::kernel_config:
  # Enable frequency scaling based on scheduler data
  CONFIG_CPU_FREQ_DEFAULT_GOV_PERFORMANCE: n
  CONFIG_CPU_FREQ_DEFAULT_GOV_SCHEDUTIL: y

  # Device drivers
  CONFIG_ROCKCHIP_SIP: y
  CONFIG_BATTERY_CW2015: m
  CONFIG_CHARGER_GPIO: m
  CONFIG_SND_SOC_ES8316: m
  CONFIG_SND_SOC_SIMPLE_AMPLIFIER: m
  CONFIG_HID_MULTITOUCH: m
  CONFIG_ROCKCHIP_SUSPEND_MODE: y

  # Nouveau is not needed and it takes too long to compile
  CONFIG_DRM_NOUVEAU: n
