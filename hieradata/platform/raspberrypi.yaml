---
nest::bootloader: systemd
nest::cflags: '-mcpu=cortex-a72 -O2 -pipe -ggdb'
nest::dvorak: true

nest::package_weights:
  dev-lang/ghc: 'heavy'
  sys-devel/clang: 'heavier'
  dev-lang/rust: 'heaviest'
  x11-misc/taffybar: 'heaviest'
  x11-wm/xmonad: 'heaviest'
  x11-wm/xmonad-contrib: 'heaviest'

nest::package_keywords:
  # For now, I want the latest improvements to v3d in mesa
  media-libs/mesa: {}

  # For mesa-20.1
  x11-base/xorg-server:
    version: '~1.20.8'

  # Still not fully open-source or mainlined...
  sys-boot/raspberrypi-firmware:
    accept_keywords: '**'
  sys-kernel/raspberrypi-sources:
    accept_keywords: '**'

nest::kernel_cmdline:
  - 'zswap.max_pool_percent=100'  # disable physical swap
  - 'vm.swappiness=100'           # use zswap opportunistically
  - 'zfs.zfs_txg_timeout=30'      # be nicer to the cheap flash
  - '8250.nr_uarts=1'             # set in DT but not passed by u-boot/systemd-boot
  - 'console=ttyS0,115200n8'
  - 'console=tty0'
  - 'noefi'                       # u-boot doesn't provide EFI services

nest::kernel_config:
  # Enable frequency scaling based on scheduler data
  CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE: n
  CONFIG_CPU_FREQ_DEFAULT_GOV_SCHEDUTIL: y
