#
# DO NOT EDIT
#
# This file was generated by Puppet
# See the 'thestaticvoid' Puppet role for details
#


#
# Redirect to canonical thestaticvoid.com
# http://httpd.apache.org/docs/current/rewrite/remapping.html#canonicalhost
#
<VirtualHost 104.156.227.40:80 [2001:19f0:300:2005::40]:80>
    ServerName thestaticvoid.com
    ServerAlias www.thestaticvoid.com thestaticvoid.org www.thestaticvoid.org tsv.co www.tsv.co
    Redirect permanent / https://thestaticvoid.com/
</VirtualHost>

<VirtualHost 104.156.227.40:443 [2001:19f0:300:2005::40]:443>
    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3
    SSLHonorCipherOrder on
    SSLCipherSuite "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS"
    SSLCertificateFile /etc/ssl/apache2/tsv.co.crt
    SSLCertificateKeyFile /etc/ssl/apache2/tsv.co.key
    SSLCertificateChainFile /etc/ssl/apache2/ca.pem

    ServerName tsv.co
    ServerAlias www.tsv.co
    Redirect permanent / https://thestaticvoid.com/
</VirtualHost>

<VirtualHost 104.156.227.40:443 [2001:19f0:300:2005::40]:443>
    SSLEngine on
    SSLProtocol all -SSLv2 -SSLv3
    SSLHonorCipherOrder on
    SSLCipherSuite "EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS"
    SSLCertificateFile /etc/ssl/apache2/thestaticvoid.com.crt
    SSLCertificateKeyFile /etc/ssl/apache2/thestaticvoid.com.key
    SSLCertificateChainFile /etc/ssl/apache2/ca.pem
    
    ServerAdmin jlee@thestaticvoid.com
    DocumentRoot "/data/www/thestaticvoid.com"
    ServerName thestaticvoid.com
    ErrorLog "/var/log/apache2/thestaticvoid.com-error_log"
    CustomLog "/var/log/apache2/thestaticvoid.com-access_log" combined

    # CouchPotato proxy
    ProxyPass /couchpotato http://hawk:5050/couchpotato
    ProxyPassReverse /couchpotato http://hawk:5050/couchpotato

    # Headphones proxy
    ProxyPass /headphones/ http://hawk:8181/
    ProxyPassReverse /headphones/ http://hawk:8181/

    # Subsonic proxy
    ProxyPass /subsonic ajp://hawk:8009/subsonic
    ProxyPassReverse /subsonic ajp://hawk:8009/subsonic

    # NzbDrone proxy
    ProxyPass /nzbdrone http://hawk:8989/nzbdrone
    ProxyPassReverse /nzbdrone http://hawk:8989/nzbdrone

    # Transmission proxy
    ProxyPass /transmission http://hawk:9091/transmission
    ProxyPassReverse /transmission http://hawk:9091/transmission

    # SABnzbd proxy
    ProxyPass /sabnzbd http://hawk:9092/sabnzbd
    ProxyPassReverse /sabnzbd http://hawk:9092/sabnzbd

    RewriteEngine on 
    RewriteRule ^/wsvn$ /wsvn/ [R=permanent,L]
    RewriteRule ^/wsvn/(.*) /wsvn.php/$1 [L]
        
    <Directory /data/www/thestaticvoid.com>
        Options +Indexes +ExecCGI
        AllowOverride all
        Require all granted
        
        # Pretty permalinks in WordPress
        RewriteEngine on
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . index.php [L]
    </Directory>
</VirtualHost>
