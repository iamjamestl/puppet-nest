---
nest::bootloader: systemd
nest::dvorak: true
nest::swap_alt_win: true

nest::package_keywords:
  # Still not fully open-source or mainlined...
  sys-boot/raspberrypi-firmware:
    accept_keywords: '**'
  sys-kernel/raspberrypi-sources:
    accept_keywords: '**'

nest::kernel_cmdline:
  - 'zfs.zfs_txg_timeout=30'  # be nicer to the cheap flash
  - '8250.nr_uarts=1'         # set in DT but not passed by u-boot/systemd-boot
  - 'console=ttyS0,115200n8'
  - 'console=tty0'
  - 'noefi'                   # u-boot doesn't provide EFI services

nest::kernel_config:
  # Enable frequency scaling based on scheduler data
  CONFIG_CPU_FREQ_DEFAULT_GOV_POWERSAVE: n
  CONFIG_CPU_FREQ_DEFAULT_GOV_SCHEDUTIL: y

  # Not available in raspberrypi-sources
  CONFIG_GCC_PLUGINS: null
  CONFIG_GENTOO_LINUX_INIT_SYSTEMD: null
