---
nest::package_keywords:
  mail-mta/nullmailer: {}

  net-analyzer/openbsd-netcat:
    accept_keywords: '**'

  x11-misc/xsel: {}

  sys-apps/kexec-tools:
    version: '<9999'
    accept_keywords: '**'

  sys-fs/zfs:
    version: '<9999'
    accept_keywords: '**'
  sys-fs/zfs-kmod:
    version: '<9999'
    accept_keywords: '**'

nest::package_mask:
  app-admin/puppet:
    version: '>=6.0.0'

nest::kernel_config:
  # Prefer giving the kernel more of the virtual address space for ZFS
  CONFIG_VMSPLIT_2G: y
  CONFIG_VMSPLIT_3G: n

# Let ZFS access more of the kernel virtual address space made available by the
# VMSPLIT above.  With a 2G split, this setting basically only does anything on
# systems with more than 2G of memory, and it guarantees around 1G of "lowmem"
# space, which is more than any 3G/1G split can provide.  All of this extra
# flexibility comes at the cost of not being able to allocate more than 2G for
# a user process, a compromise I am willing to make.
nest::kernel_cmdline: ['vmalloc=1G']

puppet::dir: '/etc/puppetlabs/puppet'
puppet::codedir: '/etc/puppetlabs/code'
puppet::ssldir: '/etc/puppetlabs/puppet/ssl'
