#
# DO NOT EDIT
#
# This file was generated by Puppet
# See the 'thestaticvoid' Puppet role for details
#


#
# Redirect to canonical thestaticvoid.com
# http://httpd.apache.org/docs/current/rewrite/remapping.html#canonicalhost
#
<VirtualHost *:80>
    ServerName thestaticvoid.com
    ServerAlias www.thestaticvoid.com thestaticvoid.org www.thestaticvoid.org tsv.co www.tsv.co
    Redirect permanent / https://thestaticvoid.com/
</VirtualHost>

<VirtualHost *:443>
    SSLEngine on
    SSLCertificateFile /etc/ssl/apache2/tsv.co.crt
    SSLCertificateKeyFile /etc/ssl/apache2/tsv.co.key
    SSLCertificateChainFile /etc/ssl/apache2/ca.pem

    ServerName tsv.co
    ServerAlias www.tsv.co
    Redirect permanent / https://thestaticvoid.com/
</VirtualHost>

<VirtualHost *:443>
    SSLEngine on
    SSLCertificateFile /etc/ssl/apache2/thestaticvoid.com.crt
    SSLCertificateKeyFile /etc/ssl/apache2/thestaticvoid.com.key
    SSLCertificateChainFile /etc/ssl/apache2/ca.pem
    
    ServerAdmin jlee@thestaticvoid.com
    DocumentRoot "/data/www/thestaticvoid.com"
    ServerName thestaticvoid.com
    ErrorLog "/var/log/apache2/thestaticvoid.com-error_log"
    CustomLog "/var/log/apache2/thestaticvoid.com-access_log" combined

    # Subsonic proxy
    ProxyPass /subsonic ajp://localhost:8009/subsonic
    ProxyPassReverse /subsonic ajp://localhost:8009/subsonic

    # SABnzbd proxy
    ProxyPass /sabnzbd http://falcon:9092/sabnzbd
    ProxyPassReverse /sabnzbd http://falcon:9092/sabnzbd

    # Transmission proxy
    ProxyPass /transmission http://falcon:9091/transmission
    ProxyPassReverse /transmission http://falcon:9091/transmission

    RewriteEngine on 
    RewriteRule ^/wsvn$ /wsvn/ [R=permanent,L]
    RewriteRule ^/wsvn/(.*) /wsvn.php/$1 [L]
    RewriteRule /transmission[/]?$ /transmission/web [R=permanent,L]
        
    <Directory /data/www/thestaticvoid.com>
        Options +Indexes +ExecCGI
        AllowOverride all
        Require all granted
        
        # Pretty permalinks in WordPress
        RewriteEngine on
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule . index.php [L]
    </Directory>
</VirtualHost>
